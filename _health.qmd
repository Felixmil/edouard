{{< include _setup.qmd >}}

## üè• Sant√©

### Sympt√¥mes

```{r}
library(reactable)

symptomes_data <- data |>
  dplyr::filter(variable == "symptome") |>
  dplyr::arrange(dplyr::desc(datetime))

if (nrow(symptomes_data) > 0) {
  symptomes_data |>
    dplyr::select(datetime, notes) |>
    reactable(
      sortable = TRUE,
      columns = list(
        datetime = colDef(
          name = "Date et heure",
          format = colFormat(datetime = TRUE)
        ),
        notes = colDef(name = "Description")
      )
    )
} else {
  cat("Aucun sympt√¥me enregistr√©.")
}
```

### Temp√©ratures

```{r}
#| fig.width: 8
#| fig.asp: 0.5

temp_data <- get_temperature_data(data)

if (nrow(temp_data) > 0) {
  colors <- edouard_colors()

  temp_data |>
    ggplot(aes(x = datetime, y = value)) +
    # Zone bleue pour temp√©ratures trop basses (< 36.5¬∞C)
    annotate(
      "rect",
      xmin = min(temp_data$datetime),
      xmax = max(temp_data$datetime),
      ymin = -Inf,
      ymax = 36.5,
      fill = "blue",
      alpha = 0.1
    ) +
    # Zone rouge pour temp√©ratures trop √©lev√©es (> 37.5¬∞C)
    annotate(
      "rect",
      xmin = min(temp_data$datetime),
      xmax = max(temp_data$datetime),
      ymin = 37.5,
      ymax = Inf,
      fill = "red",
      alpha = 0.1
    ) +
    # Courbe de tendance
    geom_smooth(
      method = "loess",
      span = 0.3,
      color = "grey60",
      fill = "grey60",
      alpha = 0.2,
      linewidth = 1
    ) +
    # Points de mesure
    geom_point(color = "grey40", size = 3) +
    scale_x_datetime(date_labels = "%d %b") +
    labs(
      y = "Temp√©rature (¬∞C)",
      x = NULL
    ) +
    theme_minimal() +
    theme(
      panel.grid.minor = element_blank()
    )
} else {
  cat("Aucune donn√©e de temp√©rature √† afficher.")
}
```
